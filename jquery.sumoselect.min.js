/*!
 * jquery.sumoselect - v3.0.3
 * http://hemantnegi.github.io/jquery.sumoselect
 */

!function(e){"namespace sumo";e.fn.SumoSelect=function(t){var l=e.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1},t),s=this.each(function(){var t=this;!this.sumo&&e(this).is("select")&&(this.sumo={E:e(t),is_multi:e(t).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var t=this;return t.E.wrap('<div class="SumoSelect" tabindex="0">'),t.select=t.E.parent(),t.caption=e("<span>"),t.CaptionCont=e('<p class="CaptionCont"><label><i></i></label></p>').addClass("SelectBox").attr("style",t.E.attr("style")).prepend(t.caption),t.select.append(t.CaptionCont),t.is_multi||(l.okCancelInMulti=!1),t.E.attr("disabled")&&t.select.addClass("disabled").removeAttr("tabindex"),l.outputAsCSV&&t.is_multi&&t.E.attr("name")&&(t.select.append(e('<input class="HEMANT123" type="hidden" />').attr("name",t.E.attr("name")).val(t.getSelStr())),t.E.removeAttr("name")),t.isMobile()&&!l.forceCustomRendering?void t.setNativeMobile():(t.E.attr("name")&&t.select.addClass("sumo_"+t.E.attr("name").replace(/\[\]/,"")),t.E.addClass("SumoUnder").attr("tabindex","-1"),t.optDiv=e('<div class="optWrapper '+(l.up?"up":"")+'">'),t.floatingList(),t.ul=e('<ul class="options">'),t.optDiv.append(t.ul),l.selectAll&&t.SelAll(),l.search&&t.Search(),t.ul.append(t.prepItems(t.E.children())),t.is_multi&&t.multiSelelect(),t.select.append(t.optDiv),t.basicEvents(),void t.selAllState())},prepItems:function(t,l){var s=[],i=this;return e(t).each(function(t,n){n=e(n),s.push(n.is("optgroup")?e('<li class="group '+(n[0].disabled?"disabled":"")+'"><label>'+n.attr("label")+"</label><ul></ul><li>").find("ul").append(i.prepItems(n.children(),n[0].disabled)).end():i.createLi(n,l))}),s},createLi:function(t,l){var s,i=this;return t.attr("value")||t.attr("value",t.val()),s=e('<li class="opt">'+(i.is_multi?"<span><i></i></span>":"")+"<label>"+t.html()+"</label></li>"),s.data("opt",t),t.data("li",s),(t[0].disabled||l)&&(s=s.addClass("disabled")),i.onOptClick(s),t[0].selected&&s.addClass("selected"),t.attr("class")&&s.addClass(t.attr("class")),s},getSelStr:function(){var t=[];return this.E.find("option:selected").each(function(){t.push(e(this).val())}),t.join(l.csvSepChar)},multiSelelect:function(){var t=this;t.optDiv.addClass("multiple"),t.okbtn=e('<p class="btnOk">'+l.locale[0]+"</p>").click(function(){l.triggerChangeCombined&&(changed=!1,t.E.find("option:selected").length!=t.Pstate.length?changed=!0:t.E.find("option").each(function(e,l){l.selected&&t.Pstate.indexOf(e)<0&&(changed=!0)}),changed&&(t.callChange(),t.setText())),t.hideOpts()}),t.cancelBtn=e('<p class="btnCancel">'+l.locale[1]+"</p>").click(function(){t._cnbtn(),t.hideOpts()}),t.optDiv.append(e('<div class="MultiControls">').append(t.okbtn).append(t.cancelBtn))},_cnbtn:function(){var e=this;e.E.find("option:selected").each(function(){this.selected=!1}),e.ul.find("li.selected").removeClass("selected");for(var t=0;t<e.Pstate.length;t++)e.E.find("option")[e.Pstate[t]].selected=!0,e.ul.find("li.opt").eq(e.Pstate[t]).addClass("selected");e.selAllState()},SelAll:function(){var t=this;t.is_multi&&(t.selAll=e('<p class="select-all"><span><i></i></span><label>'+l.locale[2]+"</label></p>"),t.selAll.on("click",function(){var l,s=t.selAll.toggleClass("selected").hasClass("selected");t.ul.find("li.opt:not(.hidden)").each(function(i,n){n=e(n),l=n.data("opt")[0],l.selected!=s&&(l.selected=s,t.mob||n.toggleClass("selected",s))}),t.callChange(),t.setPstate(),t.setText(),t.selAllState()}),t.optDiv.prepend(t.selAll))},Search:function(){var t=this,s=t.CaptionCont.addClass("search"),i=e('<p class="no-match">');t.ftxt=e('<input type="text" class="search-txt" value="" placeholder="'+l.searchText+'">').on("click",function(e){e.stopPropagation()}),s.append(t.ftxt),t.ul.after(i),t.ftxt.on("keyup.sumo",function(){var s=t.ul.find("li.opt").each(function(l,s){s=e(s),s.text().toLowerCase().indexOf(t.ftxt.val().toLowerCase())>-1?s.removeClass("hidden"):s.addClass("hidden")}).not(".hidden");i.html(l.noMatch.replace(/\{0\}/g,t.ftxt.val())).toggle(!s.length),t.selAllState()})},selAllState:function(){var t=this;if(l.selectAll){var s=0,i=0;t.ul.find("li.opt:not(.hidden)").each(function(t,l){l=e(l),l.hasClass("selected")&&s++,l.hasClass("disabled")||i++}),s==i?t.selAll.removeClass("partial").addClass("selected"):0==s?t.selAll.removeClass("selected partial"):t.selAll.addClass("partial")}},showOpts:function(){var t=this;t.E.attr("disabled")||(t.E.trigger("sumo:opening"),t.is_opened=!0,t.select.addClass("open"),t.E.trigger("sumo:opened"),t.ftxt?t.ftxt.focus():t.select.focus(),e(document).on("click.sumo",function(e){if(!t.select.is(e.target)&&0===t.select.has(e.target).length){if(!t.is_opened)return;t.hideOpts(),l.okCancelInMulti&&t._cnbtn()}}),t.is_floating&&(H=t.ul.outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H),e("body").addClass("sumoStopScroll")),t.setPstate())},setPstate:function(){var e=this;e.is_multi&&(e.is_floating||l.okCancelInMulti)&&(e.Pstate=[],e.E.find("option").each(function(t,l){l.selected&&e.Pstate.push(t)}))},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var t=this;t.is_opened&&(t.E.trigger("sumo:closing"),t.is_opened=!1,t.select.removeClass("open").find("ul li.sel").removeClass("sel"),t.E.trigger("sumo:closed"),e(document).off("click.sumo"),t.select.focus(),e("body").removeClass("sumoStopScroll"),l.search&&(t.ftxt.val(""),t.ul.find("li").removeClass("hidden"),t.ul.find(".no-match").toggle(!1)))},setOnOpen:function(){var e=this,t=e.ul.find("li.opt:not(.hidden)").eq(l.search?0:e.E[0].selectedIndex);e.ul.find("li.sel").removeClass("sel"),t.addClass("sel"),e.showOpts()},nav:function(e){var t,l=this,s=l.ul.find("li.opt:not(.disabled, .hidden)"),i=l.ul.find("li.opt.sel:not(.hidden)"),n=s.index(i);if(l.is_opened&&i.length){if(e&&n>0)t=s.eq(n-1);else{if(!(!e&&n<s.length-1&&n>-1))return;t=s.eq(n+1)}i.removeClass("sel"),i=t.addClass("sel");var a=l.ul,o=a.scrollTop(),c=i.position().top+o;c>=o+a.height()-i.outerHeight()&&a.scrollTop(c-a.height()+i.outerHeight()),o>c&&a.scrollTop(c)}else l.setOnOpen()},basicEvents:function(){var t=this;t.CaptionCont.click(function(e){t.E.trigger("click"),t.is_opened?t.hideOpts():t.showOpts(),e.stopPropagation()}),t.select.on("keydown.sumo",function(e){switch(e.which){case 38:t.nav(!0);break;case 40:t.nav(!1);break;case 32:if(l.search&&t.ftxt.is(e.target))return;case 13:t.is_opened?t.optDiv.find("ul li.sel").trigger("click"):t.setOnOpen();break;case 9:case 27:return l.okCancelInMulti&&t._cnbtn(),void t.hideOpts();default:return}e.preventDefault()}),e(window).on("resize.sumo",function(){t.floatingList()})},onOptClick:function(t){var s=this;t.click(function(){var t=e(this);t.hasClass("disabled")||(txt="",s.is_multi?(t.data("opt")[0].selected=t.toggleClass("selected").hasClass("selected"),s.selAllState()):(t.parent().find("li.selected").removeClass("selected"),t.toggleClass("selected"),t.data("opt")[0].selected=!0),s.is_multi&&l.triggerChangeCombined&&(s.is_floating||l.okCancelInMulti)||(s.setText(),s.callChange()),s.is_multi||s.hideOpts())})},setText:function(){var t=this;if(t.placeholder="",t.is_multi){for(var s=t.ul.children().length,i=t.ul.find("li.opt.selected:not(.disabled) label"),n=0;n<i.length;n++){if(n+1>=l.csvDispCount&&l.csvDispCount){l.captionFormatAllSelected&&i.length==s?t.placeholder=l.captionFormatAllSelected.replace(/\{0\}/g,i.length)+",":t.placeholder=l.captionFormat.replace(/\{0\}/g,i.length)+",";break}t.placeholder+=e(i[n]).html()+", "}t.placeholder=t.placeholder.replace(/,([^,]*)$/,"$1")}else t.placeholder=t.ul.find("li.opt.selected:not(.disabled) label").html();var a=!1;t.placeholder||(a=!0,t.placeholder=t.E.attr("placeholder"),t.placeholder||(t.placeholder=t.ul.find("li.opt.selected.disabled label").html())),t.placeholder=t.placeholder?l.prefix+" "+t.placeholder:l.placeholder,t.caption.html(t.placeholder),t.CaptionCont.attr("title",t.placeholder);var o=t.select.find("input.HEMANT123");return o.length&&o.val(t.getSelStr()),a?t.caption.addClass("placeholder"):t.caption.removeClass("placeholder"),t.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,t=0;t<l.nativeOnDevice.length;t++)if(e.toString().toLowerCase().indexOf(l.nativeOnDevice[t].toLowerCase())>0)return l.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var t=this;t.is_floating=e(window).width()<=l.floatWidth,t.optDiv.toggleClass("isFloating",t.is_floating),t.is_floating||t.optDiv.css("height",""),t.optDiv.toggleClass("okCancelInMulti",l.okCancelInMulti&&!t.is_floating)},vRange:function(e){var t=this;if(opts=t.E.find("option"),opts.length<=e||0>e)throw"index out of bounds";return t},toggSel:function(t,l){var s=this;"number"==typeof l?(s.vRange(l),opt=s.E.find("option")[l]):opt=s.E.find('option[value="'+l+'"]')[0]||0,opt&&!opt.disabled&&opt.selected!=t&&(opt.selected=t,s.mob||e(opt).data("li").toggleClass("selected",t),s.callChange(),s.setPstate(),s.setText(),s.selAllState())},toggDis:function(e,t){var l=this.vRange(t);l.E.find("option")[t].disabled=e,e&&(l.E.find("option")[t].selected=!1),l.mob||l.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),l.setText()},toggSumo:function(e){var t=this;return t.enabled=e,t.select.toggleClass("disabled",e),e?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(t){var l=this;l.E.find("option").not(":disabled").each(function(s,i){i.selected=t,l.mob||e(i).data("li").toggleClass("selected",t)}),!l.mob&&l.selAll&&l.selAll.removeClass("partial").toggleClass("selected",t),l.callChange(),l.setText(),l.setPstate()},reload:function(){var t=this.unload();return e(t).SumoSelect(l)},unload:function(){var e=this;return e.select.before(e.E),e.E.show(),l.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete t.sumo,t},add:function(l,s,i){if("undefined"==typeof l)throw"No value to add";var n=this;if(opts=n.E.find("option"),"number"==typeof s&&(i=s,s=l),"undefined"==typeof s&&(s=l),opt=e("<option></option>").val(l).html(s),opts.length<i)throw"index out of bounds";return"undefined"==typeof i||opts.length==i?(n.E.append(opt),n.mob||n.ul.append(n.createLi(opt))):(opts.eq(i).before(opt),n.mob||n.ul.find("li.opt").eq(i).before(n.createLi(opt))),t},remove:function(e){var t=this.vRange(e);t.E.find("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var e=this;return e.createElems(),e.setText(),e}},t.sumo.init())});return 1==s.length?s[0]:s}}(jQuery);